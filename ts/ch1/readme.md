问题：

- 代码组织不清晰，但还在可忍受限度内。
- 程序能正常工作，“不清晰”只是个美学意义上的判断，机器不在乎“好不好看”
- 但，当我们需要修改系统时，就涉及人了。
- 如果很难找到修改点，那就可能犯错，引入 bug 。

> 如果你要给程序添加特性，但发现代码因缺少良好结构而不易于更改，那就先重构使得容易添加特性，再添加特性。

本例中，我们用户希望对系统做更改后，可以添加HTML格式的输出。

-----

这时候，有个较直观而常见的做法，添加一个参数：toHtml 然后在函数内进行对此进行判断，修改字符串

然而，这会让这段代码变得更加难维护。

还有另一个做法，再复制一份，然后只做对应修改，这看起来很好，旧代码不会受影响，新的功能也非常容易实现。然而，当我们需要对计算逻辑做修改时，却需要同时修改两份代码

-----

重构第一步：让自己即将修改的代码拥有一组可靠的测试